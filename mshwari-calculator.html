<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>M‑Shwari Loan Calculator - JazaLoan Kenya</title>
  <meta name="description" content="Use the M‑Shwari Loan Calculator to instantly estimate disbursement, facility fees, excise duty, and repayment due date. Trusted by Kenyan borrowers.">
  <!-- Open Graph -->
<meta property="og:title" content="M‑Shwari Loan Calculator Kenya" />
<meta property="og:description" content="Accurate M‑Shwari loan breakdown for Kenyan borrowers. Calculate fees, disbursed amount, and due date easily." />
<meta property="og:url" content="https://jazaloan.co.ke/mshwari-loan-calculator" />
<meta property="og:type" content="website" />

<!-- Twitter Card -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="M‑Shwari Loan Calculator Kenya" />
<meta name="twitter:description" content="Free Kenyan M‑Shwari loan calculator. Instantly view disbursed amount, facility fees, excise duty and due date." />

  <style>
    html {
      scroll-behavior: smooth;
    }
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      margin: 0;
      padding: 0;
    }
/* ————— Sticky Shrinking Header ————— */
.site-header {
  position: sticky;
  top: 0;
  z-index: 1000;
  transition: all 0.3s ease;
  background: white;
}
.site-header.shrink {
  padding: 2px 10px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
}
.site-header.shrink .logo {
  height: 60px !important;
  max-height: 60px !important;
}
.site-header.shrink .navbar a {
  font-size: 13px;
  padding: 4px 8px;
}

/* ————— Header / Logo / Nav ————— */
.header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  max-width: 1000px;
  margin: auto;
  padding: 5px 15px;
}
.logo {
  height: 90px;
  transition: height 0.3s ease;
}
.navbar {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
  justify-content: center;
}
.navbar a {
  font-size: 15px;
  text-decoration: none;
  color: #2c3e50;
  font-weight: 600;
  padding: 8px 12px;
  position: relative;
}
.navbar a:hover { color: #007bff; }
.navbar a::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 0%;
  height: 2px;
  background-color: #007bff;
  transition: width 0.3s ease;
}
.navbar a:hover::after { width: 100%; }

/* ————— Mobile Nav + Hamburger ————— */
.hamburger {
  display: none;
  flex-direction: column;
  justify-content: space-between;
  width: 24px;
  height: 18px;
  cursor: pointer;
  z-index: 1100;
}
.hamburger span {
  display: block;
  height: 3px;
  width: 100%;
  background-color: #2c3e50;
  border-radius: 2px;
  transition: all 0.3s ease;
}
.hamburger.active span:nth-child(1) {
  transform: rotate(45deg) translate(5px, 5px);
}
.hamburger.active span:nth-child(2) {
  opacity: 0;
}
.hamburger.active span:nth-child(3) {
  transform: rotate(-45deg) translate(5px, -5px);
}
.mobile-nav {
  position: fixed;
  top: 0;
  right: -100%;
  height: 100%;
  width: 250px;
  background: #fff;
  display: flex;
  flex-direction: column;
  padding: 60px 20px 20px;
  box-shadow: -2px 0 8px rgba(0, 0, 0, 0.1);
  transition: right 0.3s ease;
  z-index: 999;
}
.mobile-nav.show {
  right: 0;
}
.mobile-nav a {
  padding: 12px 0;
  color: #2c3e50;
  text-decoration: none;
  font-weight: 600;
  font-size: 16px;
}
.mobile-overlay {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.4);
  display: none;
  z-index: 998;
}
.mobile-overlay.show {
  display: block;
}
@media (max-width: 768px) {
  .hamburger { display: flex; }
  .desktop-only { display: none !important; }
}


.site-header {
  height: 100px; /* or however tall it is initially */
  transition: all 0.3s ease;
}

.site-header.shrink {
  height: 70px;
  padding: 2px 10px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
}
/* ————— Mobile-only Share (Bottom) ————— */
.mobile-only-share {
  display: none;
}
.mobile-only-share a {
  width: 32px;
  height: 32px;
  margin: 0 6px;
  border-radius: 50%;
  background-size: 60% 60%;
  background-repeat: no-repeat;
  background-position: center;
  display: inline-block;
  transition: transform 0.3s ease;
}
.mobile-share-title {
  text-align: center;
  font-family: 'Playfair Display', serif;
  font-size: 20px;
  font-weight: 600;
  margin-bottom: 10px;
  display: none;
}
@media (max-width: 768px) {
  .floating-share-icons { display: none; }
  .mobile-only-share {
    display: flex;
    justify-content: center;
    margin: 20px auto;
  }
  .mobile-share-title {
    display: block;
  }
  .mobile-only-share a:hover {
    animation: bounce 0.4s ease;
  }
  @keyframes bounce {
    0% { transform: scale(1); }
    30% { transform: scale(1.2); }
    50% { transform: scale(0.9); }
    70% { transform: scale(1.05); }
    100% { transform: scale(1); }
  }
  .hamburger { display: flex; }
  .desktop-only { display: none !important; }
}

    .container {
      max-width: 600px;
      margin: 30px auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1, h2 {
      text-align: center;
      color: #2c3e50;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      background: #27ae60;
      color: white;
      padding: 12px;
      border: none;
      border-radius: 5px;
      margin-top: 20px;
      width: 100%;
      font-size: 16px;
      cursor: pointer;
      transition: transform 0.2s ease, background-color 0.3s ease;
    }
    button:hover {
      background-color: #1e8449;
      transform: scale(1.03);
    }
    .results {
      margin-top: 25px;
      padding: 15px;
      background: #e9f8ef;
      border-left: 5px solid #0b5e2b;
      border-radius: 8px;
    }
    
    .affiliate, .about {
      max-width: 800px;
      margin: 40px auto;
      background: #fff;
      padding: 25px 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
    .about h2, .affiliate h2 {
      color: #0b5e2b;
    }
    footer {
      background-color: #03457b;
      padding: 10px 0;
      font-size: 13px;
      text-align: center;
      color: white;
    }
    footer a {
      color: white;
      text-decoration: none;
      margin: 0 5px;
    }
    footer a:hover {
      text-decoration: underline;
    }
   @media (max-width: 600px) {
  .logo {
    margin: 0 auto;
    display: block;
  }
}

.affiliate details {
  scroll-margin-top: 100px;
  transition: all 0.3s ease;
}

  details {
    margin-bottom: 20px;
    border: 1px solid #ddd;
    border-radius: 5px;
    background: #fafafa;
    padding: 10px 15px;
  }
  summary {
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    padding: 8px 0;
    color: #03457b;
  }
  summary:hover {
    color: #007bff;
  }
  details[open] summary {
    border-bottom: 1px solid #ccc;
    margin-bottom: 10px;
  }

  
  @keyframes fadeInAnswer {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.affiliate details[open] > *:not(summary) {
  animation: fadeInAnswer 0.35s ease-in-out;
}
@keyframes fadeInFAQ {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}

.faq-block {
  animation: fadeInFAQ 0.7s ease-out;
  animation-fill-mode: both;
}
.faq-block {
  animation: fadeInFAQ 0.5s ease-out;
  animation-fill-mode: both;
  scroll-margin-top: 100px;
}
.results-animate {
  animation: fadeInResult 0.5s ease-in-out;
}

@keyframes fadeInResult {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

  details {
    margin-bottom: 20px;
    border: 1px solid #ddd;
    border-radius: 5px;
    background: #fafafa;
    padding: 10px 15px;
  }
  summary {
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    padding: 8px 0;
    color: #03457b;
  }
  summary:hover {
    color: #007bff;
  }
  details[open] summary {
    border-bottom: 1px solid #ccc;
    margin-bottom: 10px;
  }
  
.cta-button {
  background-color: #0b5e2b;
  color: white;
  padding: 12px 20px;
  border-radius: 6px;
  text-decoration: none;
  font-weight: 600;
  display: inline-block;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.cta-button:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(11, 94, 43, 0.2);
}

body {
  opacity: 0;
  transition: opacity 1s ease-in-out;
}

body.fade-in {
  opacity: 1;
}
.results-grid {
  display: flex;
  gap: 20px;
  margin-bottom: 20px;
}

.result-card {
  flex: 1;
  background: #f9f9f9;
  padding: 20px;
  text-align: center;
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.result-card h3 {
  font-size: 1.2em;
  margin-bottom: 10px;
  color: #2c3e50;
}

.result-card p {
  font-size: 1.6em;
  font-weight: bold;
  color: #27ae60;
}

.details-table table {
  width: 100%;
  border-collapse: collapse;
}

.details-table td {
  padding: 10px;
  border-bottom: 1px solid #ddd;
}

.details-table td:first-child {
  font-weight: 600;
}

.explanation {
  margin-top: 15px;
  padding: 15px;
  background: #eef5ff;
  border-left: 4px solid #2980b9;
  font-size: 0.95em;
  line-height: 1.4em;
}

.results-actions {
  margin-top: 20px;
  display: flex;
  gap: 10px;
}

#backToTop {
  position: fixed;
  bottom: 40px;
  right: 20px;
  width: 40px;
  height: 40px;
  background-color: #1abc9c;
  color: white;
  border: none;
  border-radius: 50%;
  font-size: 18px;
  font-weight: bold;
  line-height: 40px;
  text-align: center;
  cursor: pointer;
  display: none;
  z-index: 9999;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  transition: transform 0.3s ease, background-color 0.3s ease;
}
#backToTop:hover {
  background-color: #148f77;
  transform: scale(1.15);
}
  </style>
  <link rel="canonical" href="https://jazaloan.co.ke/mshwari-loan-calculator" />
</head>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>

  <header class="site-header fade-in">
    <div id="overlay" class="mobile-overlay"></div>
    <div class="header-content">
      <img src="Images/logo.png" alt="JazaLoan Logo" class="logo">
     <div id="hamburger" class="hamburger">
  <span></span>
  <span></span>
  <span></span>
</div>

    <!-- Desktop Nav -->
    <nav class="navbar desktop-only" id="mainNav">
      <a href="index.html">Home</a>
      <a href="kcb-mpesa-loan.html">KCB Mpesa Calculator</a>
      <a href="budgeting-calculator.html">Budgeting Calculator</a>
      <a href="best-loans-by-salary.html">Loans by Salary</a>
      <a href="compare-loans.html">Compare Loans</a>
    </nav>
  </div>

  <!-- Mobile Nav -->
  <nav class="mobile-nav" id="mobileNav">
    <a href="index.html">Home</a>
    <a href="kcb-mpesa-loan.html">KCB Mpesa Calculator</a>
    <a href="budgeting-calculator.html">Budgeting Calculator</a>
    <a href="best-loans-by-salary.html">Loans by Salary</a>
    <a href="compare-loans.html">Compare Loans</a>
  </nav>
  <div id="overlay" class="mobile-overlay"></div>
</header>


  <section id="mshwari" style="padding: 40px 20px; background-color: #f9f9f9;">
  <h1 style="text-align: center; font-size: 28px; margin-bottom: 20px;">
  M‑Shwari Loan Calculator Kenya – Know Your Fees & Due Date
</h1>

  <div class="container">
    <p style="text-align: center; font-size: 16px; color: #555; margin-bottom: 20px;">
  Calculate your M‑Shwari loan repayment amount, disbursed value, and total fees in seconds. This free M‑Shwari Loan Calculator is tailored for Kenyan borrowers who want to understand their M‑PESA-based loans before applying.
</p>
<h2 style="text-align: center; color: #0b5e2b; margin-bottom: 15px;">Enter Your M‑Shwari Loan Details</h2>

  <div style="display: flex; flex-direction: column; gap: 15px;">
    <div>
      <label for="mshwariAmount">Loan Amount (Ksh):</label>
      <input
  type="text"
  id="mshwariAmount"
  class="input"
  placeholder="e.g. 5,000"
  oninput="formatAmountInput(this)"
/>

    </div>
    <div>
      <label for="loanDate">Application Date:</label>
      <input type="date" id="loanDate" />
    </div>

      <button onclick="calculateMshwariLoan()" class="btn">Calculate</button>

<div id="mshwariResults" style="display:none; margin-top: 20px; scroll-margin-top: 100px;">
  <h3 style="color: #0b5e2b; font-size: 22px; margin-bottom: 15px;">
    Loan Repayment Breakdown
  </h3>
  <p>
    This breakdown includes your disbursed loan amount, facility fee, excise duty, and exact due date—
    calculated in line with <strong>M-Shwari’s current terms</strong>.
  </p>

  <p>M-PESA Deposited Amount: <strong>Ksh <span id="mpesaDeposited"></span></strong></p>
  <p>Facility Fee (7.5%): <strong>Ksh <span id="facilityFee"></span></strong></p>
  <p>Excise Duty on Fee (15%): <strong>Ksh <span id="exciseDuty"></span></strong></p>
  <p>Total Repayment Amount: <strong>Ksh <span id="repaymentTotal"></span></strong></p>
  <p>M-Shwari Due Date (30 Days): <strong><span id="dueDate"></span></strong></p>

  <div style="text-align: center; margin-top: 10px;">
    <button 
      onclick="downloadMshwariResults()" 
      id="downloadBtn" 
      style="display: none; background-color: #03457b; color: white; padding: 10px 20px; font-weight: bold; border: none; border-radius: 5px; cursor: pointer; transition: transform 0.3s ease;">
      ⬇️ Download Breakdown (PDF)
    </button>

  <div style="text-align: center; margin-top: 20px;">
    <button 
      onclick="resetMshwariCalculator()" 
      id="resetBtn" 
      style="display: none; background-color: #038531; color: white; padding: 10px 20px; font-weight: bold; border: none; border-radius: 5px; cursor: pointer; transition: transform 0.3s ease;">
      🔄 Reset & Start Again
    </button>
  </div>
  </div>
</div>

</div>

    </div>

    <div style="margin: 40px auto; max-width: 728px; text-align: center; border: 1px dashed #ccc; padding: 20px;">
      <em>Ad or affiliate link here (e.g., Tala, Zenka, Branch, M-KOPA)</em>
    </div>

    <div class="about" style="background: #e5e7eb; color: #1c1e21; border: 1px solid #d0d4d9; border-radius: 10px;">
<h2 style="color: #0b5e2b;">Estimate Your M‑Shwari Loan Instantly</h2>

<p>The M‑Shwari Loan Calculator gives you full clarity before you borrow. It instantly breaks down your loan disbursement, facility fee (7.5%), and excise duty (15%)—so you know exactly how much you’ll receive and repay.</p>

<p>For example, if you apply for Ksh 5,000, the calculator will show that you’ll receive Ksh 4,550 and repay Ksh 5,000 after 30 days.</p>

<h4>Why use this calculator:</h4>
<ul>
  <li>✔ Transparent loan breakdown before you apply</li>
  <li>✔ Real-time results to help with repayment planning</li>
  <li>✔ Tailored for Kenyan borrowers using M‑PESA</li>
</ul>
<p>Ready to compare with other lenders? <a href="compare-loans.html">See alternative mobile loan options</a>.</p>
    </div>
    <div style="text-align: center; margin-top: 30px;">
  <p><strong>Like our calculators? Share JazaLoan with others:</strong></p>
  <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
    <a href="https://wa.me/?text=Try%20this%20free%20Kenyan%20loan%20and%20PAYE%20calculator:%20https://jazaloan.co.ke" target="_blank" title="Share on WhatsApp">
      <img src="https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/whatsapp.svg" alt="WhatsApp" width="28" height="28" style="vertical-align: middle;" />
    </a>
    <a href="https://www.facebook.com/sharer/sharer.php?u=https://jazaloan.co.ke" target="_blank" title="Share on Facebook">
      <img src="https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/facebook.svg" alt="Facebook" width="28" height="28" style="vertical-align: middle;" />
    </a>
    <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://jazaloan.co.ke" target="_blank" title="Share on LinkedIn">
      <img src="https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/linkedin.svg" alt="LinkedIn" width="28" height="28" style="vertical-align: middle;" />
    </a>
    <a href="https://twitter.com/intent/tweet?text=Try%20this%20free%20Kenyan%20loan%20and%20PAYE%20calculator&url=https://jazaloan.co.ke" target="_blank" title="Share on X (Twitter)">
      <img src="https://cdn.jsdelivr.net/npm/simple-icons@v10/icons/x.svg" alt="X" width="28" height="28" style="vertical-align: middle;" />
    </a>
  </div>
</div>
  </div>
  </section>
<section class="seo-section-light" style="background-color: #e8f7ed; padding: 50px 20px;">
  <div class="container" style="max-width: 1000px; margin: 0 auto;">
    <h2 style="color: #0b5e2b; font-size: 28px; text-align: center; margin-bottom: 25px; animation: fadeInUp 0.5s ease-in-out;">Everything You Need to Know About M‑Shwari Loans</h2>

    <p style="font-size: 16px; line-height: 1.7; color: #333; animation: fadeInUp 0.6s ease-in-out;">
      M‑Shwari is a paperless banking service offered through M‑PESA that gives you access to micro-savings and instant mobile loans. The loan calculator above allows you to preview the deductions, fees, and due repayment date before you even apply. It's 100% free and built specifically for Kenyan borrowers seeking fast and affordable financing.
    </p>

    <div style="margin-top: 30px; animation: fadeInUp 0.7s ease-in-out;">
      <h3 style="color: #0b5e2b;">Frequently Asked Questions</h3>
      <details class="faq-block" style="margin-top: 15px;">
        <summary>How does the M‑Shwari loan calculator work?</summary>
        <p>The calculator uses the official 7.5% facility fee and 15% excise duty on the fee to show the disbursed amount and repayment total for your loan.</p>
      </details>
      <details class="faq-block">
        <summary>Is the calculator free to use?</summary>
        <p>Yes! The tool is completely free and works instantly—no login, no signup, no charges.</p>
      </details>
      <details class="faq-block">
        <summary>Do I qualify for an M‑Shwari loan?</summary>
        <p>You must be an active M‑PESA user and meet Safaricom’s credit criteria. Use this calculator to plan before applying.</p>
      </details>
      <details class="faq-block">
        <summary>How long do I have to repay?</summary>
        <p>M‑Shwari loans must be repaid within 30 days. Use this calculator to help schedule your repayment timeline.</p>
      </details>
    </div>

    <div style="margin-top: 35px; animation: fadeInUp 0.8s ease-in-out;">
      <h3 style="color: #0b5e2b;">Tired of Paying More Than You Should?</h3>
<p style="margin-bottom: 20px;">
  Many borrowers don't realize they're overpaying interest. Use our calculator to uncover the real cost of loans based on reducing or flat interest rates. Make a smarter choice today.
</p>

<div style="text-align: center;">
  <a href="index.html" class="cta-button">
    🔍 Try the Reducing/Flat Rate Calculator Now
  </a>
</div>
    </div>
  </div>
</section>
<button id="backToTop" title="Back to Top">⬆</button>
  <script>
    const backToTopBtn = document.getElementById("backToTop");
    window.addEventListener("scroll", () => {
      if (document.documentElement.scrollTop > 300 || document.body.scrollTop > 300) {
        backToTopBtn.style.display = "block";
      } else {
        backToTopBtn.style.display = "none";
      }
    });

    backToTopBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });
  </script>
  <footer>
    <div class="footer-content">
      <span><strong>JazaLoan</strong></span>
      <span>|</span>
      <span>© 2025 JazaLoan. All rights reserved.</span>
      <span>|</span>
      <span>📧 <a href="mailto:mburuthus@gmail.com">support@jazaloan.co.ke</a></span>
      <span>|</span>
      <span>💬 <a href="https://wa.me/254742592477" target="_blank">Chat on WhatsApp</a></span>
    </div>
  </footer>

<script>

function formatAmountInput(el) {
  // Remove all non-digit characters
  let raw = el.value.replace(/[^\d]/g, '');

  // Format with commas
  el.value = raw.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}

    function toggleMenu() {
      document.getElementById("mainNav").classList.toggle("show");
    }

function calculateMshwariLoan() {
  const amountStr = document.getElementById("mshwariAmount").value.replace(/,/g, '');
  const amount = parseFloat(amountStr);
  const dateStr = document.getElementById("loanDate").value;

  if (!amount || amount <= 0) {
    alert("Enter a valid loan amount");
    return;
  }

  const FACILITY_RATE = 0.075;  // 7.5%
  const EXCISE_ON_FEE = 0.20;   // 20% of facility fee

  const facilityFee = amount * FACILITY_RATE;
  const exciseDuty = facilityFee * EXCISE_ON_FEE;
  const netDisbursed = amount - exciseDuty; 
  const totalRepayable = amount + facilityFee;

  const dueDate = new Date(dateStr);
  dueDate.setDate(dueDate.getDate() + 30);

  const fmt = (n) => Number(n).toLocaleString("en-KE", { minimumFractionDigits: 2, maximumFractionDigits: 2 });

  document.getElementById("facilityFee").innerText = fmt(facilityFee);
  document.getElementById("exciseDuty").innerText = fmt(exciseDuty);
  document.getElementById("mpesaDeposited").innerText = fmt(netDisbursed);
  document.getElementById("repaymentTotal").innerText = fmt(totalRepayable);
  document.getElementById("dueDate").innerText = dueDate.toDateString();

  const resultsBlock = document.getElementById("mshwariResults");
  resultsBlock.style.display = "block";
  document.getElementById("resetBtn").style.display = "inline-block";
  resultsBlock.classList.add("results-animate");
  document.getElementById("downloadBtn").style.display = "inline-block";

  setTimeout(() => {
    resultsBlock.scrollIntoView({ behavior: "smooth", block: "center" });
  }, 200);

  const explanation = `The facility fee (7.5% of the loan) is Ksh ${fmt(facilityFee)}. ` +
    `Excise duty is 20% of the facility fee (Ksh ${fmt(exciseDuty)}) and is deducted at disbursement. ` +
    `You will receive Ksh ${fmt(netDisbursed)} in your M-PESA account. ` +
    `You must repay the principal plus the facility fee, a total of Ksh ${fmt(totalRepayable)}, within 30 days.`;

  const explEl = document.getElementById("mshwariExplanation");
  if (explEl) explEl.innerText = explanation;
}


  // Mobile nav toggle
 const hamburger = document.getElementById("hamburger");
const mobileNav = document.getElementById("mobileNav");
const overlay = document.getElementById("overlay");

const toggleMobileMenu = () => {
  hamburger.classList.toggle("active");
  mobileNav.classList.toggle("show");
  overlay.classList.toggle("show");
};

hamburger.addEventListener("click", toggleMobileMenu);
overlay.addEventListener("click", toggleMobileMenu);


function resetMshwariCalculator() {
  document.getElementById("mshwariAmount").value = "";
  document.getElementById("loanDate").value = "";
  document.getElementById("mshwariResults").style.display = "none";
  document.getElementById("resetBtn").style.display = "none";
  document.getElementById("downloadBtn").style.display = "none";
  // Scroll back to input section
  document.getElementById("mshwari").scrollIntoView({ behavior: "smooth", block: "start" });
}

function downloadMshwariResults() {
  if (typeof window.jspdf === "undefined") {
    alert("PDF generation library not loaded. Please check jsPDF script.");
    return;
  }

  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  const safeNum = (value) => {
    const cleaned = String(value || "").replace(/,/g, "").trim();
    return isNaN(cleaned) || cleaned === "" ? 0 : Number(cleaned);
  };

  // --- Header ---
  doc.setFont("helvetica", "bold");
  doc.setFontSize(18);
  doc.text("M-Shwari Loan Repayment Report", 14, 20);

  doc.setFont("helvetica", "normal");
  doc.setFontSize(11);
  doc.setTextColor(100);
  doc.text(`Generated on: ${new Date().toLocaleString()}`, 14, 28);

  // --- Get Data Safely ---
  const amount = safeNum(document.getElementById("mshwariAmount").value);
  const date = document.getElementById("loanDate").value || "-";
  const fee = safeNum(document.getElementById("facilityFee").innerText);
  const duty = safeNum(document.getElementById("exciseDuty").innerText);
  const deposited = safeNum(document.getElementById("mpesaDeposited").innerText);
  const total = safeNum(document.getElementById("repaymentTotal").innerText);
  const due = document.getElementById("dueDate").innerText || "-";

  // --- Table ---
  const tableData = [
    ["Loan Amount", `Ksh ${amount.toLocaleString()}`],
    ["Loan Start Date", date],
    ["M-PESA Deposited", `Ksh ${deposited.toLocaleString()}`],
    ["Facility Fee (7.5%)", `Ksh ${fee.toLocaleString()}`],
    ["Excise Duty on Fee (15%)", `Ksh ${duty.toLocaleString()}`],
    ["Total Repayment Amount", `Ksh ${total.toLocaleString()}`],
    ["Due Date (30 Days)", due]
  ];

  doc.autoTable({
    startY: 38,
    head: [["Description", "Amount"]],
    body: tableData,
    styles: { fontSize: 11, cellPadding: 4 },
    headStyles: { fillColor: [3, 69, 123], textColor: 255, fontStyle: "bold" },
    alternateRowStyles: { fillColor: [240, 240, 240] }
  });

 // --- Summary Section ---
const summaryY = doc.lastAutoTable.finalY + 12;
doc.setFont("helvetica", "bold");
doc.setFontSize(13);
doc.setTextColor(40);
doc.text("Loan Summary", 14, summaryY);

doc.setFont("helvetica", "normal");
doc.setFontSize(11);
doc.setTextColor(60);

const summaryPoints = [
  `Loan Amount: Ksh ${amount.toLocaleString()}`,
  `Loan Start Date: ${date}`,
  `Facility Fee: 7.5% of loan amount (Ksh ${fee.toLocaleString()})`,
  `Excise Duty: 15% of facility fee (Ksh ${duty.toLocaleString()})`,
  `Total Repayment: Ksh ${total.toLocaleString()}`,
  `Due Date: ${due}`,
  `Note: Ensure timely repayment to avoid penalties or negative credit reporting.`
];

// Bulleted style
let bulletY = summaryY + 8;
summaryPoints.forEach(point => {
  doc.circle(12, bulletY - 2.5, 1, "F"); // small bullet
  doc.text(point, 16, bulletY);
  bulletY += 7;
});


  // --- Footer ---
  const pageHeight = doc.internal.pageSize.height;
  doc.setFontSize(9);
  doc.setTextColor(150);
  doc.text("Generated by JazaLoan.co.ke – For informational purposes only", 14, pageHeight - 10);
  doc.text(`Page 1 of 1`, doc.internal.pageSize.width - 30, pageHeight - 10);

  doc.save("M-Shwari_Loan_Report.pdf");
}

</script>

<script>
document.querySelectorAll("details.faq-block").forEach((detail) => {
  detail.addEventListener("toggle", function () {
    if (this.open) {
      // Close all others
      document.querySelectorAll("details.faq-block").forEach((el) => {
        if (el !== this) el.removeAttribute("open");
      });

      // Scroll this into view
      setTimeout(() => {
        this.scrollIntoView({ behavior: "smooth", block: "start" });
      }, 200);
    }
  });
});
document.addEventListener("DOMContentLoaded", () => {
  // Shrink header on scroll
  window.addEventListener("scroll", () => {
    const header = document.querySelector(".site-header");
    if (window.scrollY > 50) {
      header.classList.add("shrink");
    } else {
      header.classList.remove("shrink");
    }
  });
});

</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "How does the M‑Shwari loan calculator work?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The calculator uses the official 7.5% facility fee and 15% excise duty on that fee to show your M‑PESA disbursement and repayment total. It updates in real-time when you enter a loan amount and application date."
      }
    },
    {
      "@type": "Question",
      "name": "Is the M‑Shwari loan calculator free to use?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. The M‑Shwari Loan Calculator is 100% free to use. You don't need to sign up or create an account."
      }
    },
    {
      "@type": "Question",
      "name": "Do I qualify for an M‑Shwari loan?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "To qualify, you must be an active M‑PESA user with a good transaction history. Safaricom uses credit scoring to determine your loan limit."
      }
    },
    {
      "@type": "Question",
      "name": "What is the facility fee on M‑Shwari loans?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "M‑Shwari charges a 7.5% facility fee on the loan amount. An additional 15% excise duty is charged on the fee. The calculator includes both in your final repayment estimate."
      }
    },
    {
      "@type": "Question",
      "name": "How long do I have to repay a M‑Shwari loan?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "You must repay the full amount within 30 days from the date of borrowing. The calculator shows your expected due date."
      }
    },
    {
      "@type": "Question",
      "name": "Can I compare M‑Shwari with other mobile loans?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. Visit our Compare Loans section to view mobile loan alternatives like Tala, Zenka, or KCB M-PESA and see their costs side-by-side with M‑Shwari."
      }
    }
  ]
}
</script>
<script>
  window.addEventListener('load', () => {
    document.body.classList.add('fade-in');
  });
</script>
</body>
</html>
